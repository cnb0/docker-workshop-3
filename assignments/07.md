# Implementing a visitor counter

An application often needs something else to function correctly. For example, if we'd like our website to have a visitor counter, we need to store the current visit count somewhere. An easy choice would be to use a key-value store, like [Redis](https://redis.io/) to store this number.

There is an [official image for Redis](https://hub.docker.com/_/redis/) too.

Let's start it:

```bash
docker run --name redis -d redis:3.2
```

To be able to use it in a PHP application, we can install the [`redis` PECL extension](https://github.com/phpredis/phpredis). Add the following lines to `docker/webserver/Dockerfile` to install this extension in the `webserver` image, *right after the line starting with `FROM`*: 

```docker
RUN pecl install redis
RUN docker-php-ext-enable redis
```

Then rebuild the image:

```bash
docker build -t my_webserver -f docker/webserver/Dockerfile ./
```

You should see the `redis` extension being installed in the container image.

To be able to connect to the `redis` container using its host name, we should *link* the the `redis` container to the `webserver` container, using the `-d` option:

```bash
docker run \
    -p 80:80 \
    -v `pwd`/web:/var/www/html \
    -d \
    --link redis \
    --name webserver \
    my_webserver
```
